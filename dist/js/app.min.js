!function(){"use strict";function e(e){e.when("/",{templateUrl:"dist/views/home.html"}).when("/cadastrar",{templateUrl:"dist/views/cadastro.html",controller:"cadastro.ctrl"}).when("/gerenciar",{templateUrl:"dist/views/gerenciamento.html",controller:"gerenciamento.ctrl"}).otherwise("/")}angular.module("app.gerenciador",["ngRoute","app.geogoncalo","file-model","ui.utils.masks"]).config(["$routeProvider",e])}();
!function(){"use strict";angular.module("app.geogoncalo",[])}();
!function(){"use strict";angular.module("app.login",["app.geogoncalo"])}();
!function(){"use strict";angular.module("app.mapa",["app.geogoncalo"])}();
!function(){angular.module("app.geogoncalo").constant("Constants",{url:"http://localhost:8080/geo_goncalo/"})}();
!function(){"use strict";function a(a,o,t,n,r,e){var i,c,l,s;a.marcador={},a.marcador.obra={},a.cadastrarMarcador=function(t){var n=a.myFile;o.cadastrarMarcador(t).then(function(t){a.marcador={},n&&o.uploadImagem(n,t.data.obra.id).then(function(a){console.log(a)},null)},null)},a.listarTipos=function(){o.listarTipos().then(function(o){a.tipos=o.data},null)},a.setCategorias=function(o){a.categorias=angular.copy(o),console.log(a.categorias)},a.listarCategoriasPorTipo=function(t){o.listarCategoriasPorTipo(t).then(function(o){a.categorias=o.data},null)},a.listarStatus=function(){o.listarStatus().then(function(o){a.status=o.data},null)}(),a.modalCadastro=function(){$("#modal-cadastrar").modal("show")},a.initMap=function(){i=new google.maps.Map(document.getElementById("mapa"),{center:{lat:-5.7968718,lng:-35.4148505},zoom:12}),l=new google.maps.Geocoder,c=new google.maps.Marker({map:i}),google.maps.event.addListener(i,"click",function(o){a.marcador.latitude=o.latLng.lat(),a.marcador.longitude=o.latLng.lng();var n=new google.maps.LatLng(a.marcador.latitude,a.marcador.longitude);i.panTo(n),c.setPosition(n),l.geocode({location:n},function(o,n){if(n===google.maps.GeocoderStatus.OK){o[0]&&(a.marcador.obra.rua=o[0].formatted_address);var r="<div.content><h4>"+o[0].formatted_address+'</h4><button class="btn btn-primary" ng-click="modalCadastro()">Cadastrar obra</button></div>',e=t(r)(a);console.log(e),s=new google.maps.InfoWindow({content:e[0]}),s.open(i,c)}})})}(),a.listarTipos()}angular.module("app.gerenciador").controller("cadastro.ctrl",["$scope","api.service","$compile","api.autenticacao.service","$window","Constants",a])}();
!function(){"use strict";function a(a,t,o){console.log(o),a.listarMarcadores=function(){t.listarMarcadores().then(function(t){console.log(t),a.marcadores=t.data},null)},a.editar=function(t){a.obraEdit=angular.copy(t.obra),$("#modal-editar").modal("show"),a.listarCategoriasPorTipo(obra.tipo.id)},a.editarObra=function(a){t.atualizarObra(a).then(function(a){console.log(a)},null)},a.deletarMarcador=function(o){t.deletarMarcador(o).then(function(t){console.log(t),a.listarMarcadores()},null)},a.listarStatus=function(){t.listarStatus().then(function(t){a.statusList=t.data,console.log(t)},null)}(),a.listarTipos=function(){t.listarTipos().then(function(t){a.tipos=t.data},null)}(),a.listarCategoriasPorTipo=function(o){t.listarCategoriasPorTipo(o).then(function(t){a.categorias=t.data},null)},a.listarStatus=function(){t.listarStatus().then(function(t){a.status=t.data},null)}(),a.listarMarcadores()}angular.module("app.gerenciador").controller("gerenciamento.ctrl",["$scope","api.service","$route",a])}();
!function(){"use strict";function n(n){console.log(n),n.itens=[{link:"#/",nome:"Inicio",icone:"fa fa-home"},{link:"#/gerenciar",nome:"Gerenciar obras",icone:"fa fa-list"},{link:"#/cadastrar",nome:"Cadastrar Obras",icone:"fa fa-plus"}]}angular.module("app.gerenciador").controller("menu.ctrl",["$scope",n])}();
!function(){"use strict";function o(o,n,l,t,c){var i=l.search();console.log(i),"true"==i.logout&&c.logout().then(function(o){console.log(o)}),o.login=function(o){c.login(o).then(function(o){n.location.href=t.url},null)}}angular.module("app.login").controller("login.ctrl",["$scope","$window","$location","Constants","api.autenticacao.service",o])}();
!function(){"use strict";function a(a,o){var e;a.listarMarcadores=function(){o.listarMarcadores().then(function(o){a.marcadores=o.data,a.gerarMarcadores(a.marcadores)},null)},a.initMap=function(){e=new google.maps.Map(document.getElementById("mapa"),{center:{lat:-5.7968718,lng:-35.4148505},zoom:12}),a.listarMarcadores()}(),a.gerarMarcadores=function(o){for(var r=0;r<o.length;r++){var t=new google.maps.Marker({position:{lat:parseFloat(o[r].latitude),lng:parseFloat(o[r].longitude)},map:e,title:o[r].obra.categoria.denominacao,animation:google.maps.Animation.DROP,icon:"dist/img/50x60/ico_"+o[r].obra.categoria.id+".png",categoria:o[r].obra.categoria.denominacao});!function(r,t){google.maps.event.addListener(r,"mousedown",function(){a.marcador=o[t],console.log(a.marcador),$("#modal-obra").modal("show"),e.panTo({lat:parseFloat(o[t].latitude),lng:parseFloat(o[t].longitude)}),a.$apply()})}(t,r),t.setMap(e)}}}angular.module("app.mapa").controller("mapa.ctrl",["$scope","api.service",a])}();
!function(){"use strict";function c(c,e){}angular.module("app.gerenciador").controller("menu.top.ctrl",["$scope","api.autenticacao.service",c])}();
!function(){"use strict";function t(t,n){this.login=function(u){return t.post(n.url+"rest/autenticar/login",u)},this.logout=function(){return t.get(n.url+"rest/autenticar/logout")},this.autenticar=function(){return t.get(n.url+"rest/autenticar")}}angular.module("app.geogoncalo").service("api.autenticacao.service",["$http","Constants",t])}();
!function(){"use strict";function r(r,t){this.listarMarcadores=function(a){return r.get(t.url+"rest/marcadores")},this.listarMarcadoresPorCategoria=function(a){return r.get(t.url+"rest/marcadores/categoria/"+a)},this.selecionarMarcador=function(a){return r.get(t.url+"rest/marcador/"+a)},this.cadastrarMarcador=function(a){return r.post(t.url+"rest/marcadores",a)},this.atuarlizarMarcador=function(a,e){return r.put(t.url+"rest/marcador/"+a,e)},this.deletarMarcador=function(a){return r["delete"](t.url+"rest/marcador/"+a)},this.listarTipos=function(){return r.get(t.url+"rest/tipos")},this.listarCategorias=function(){return r.get(t.url+"rest/categorias")},this.listarCategoriasPorTipo=function(a){return r.get(t.url+"rest/categoria/tipo/"+a)},this.listarObras=function(){return r.get(t.url+"rest/obras")},this.atualizarObra=function(a){return r.put(t.url+"teste/"+a.id,a)},this.listarStatus=function(){return r.get(t.url+"rest/status")},this.uploadImagem=function(a,e){var s=new FormData;return s.append("file",a),s.append("obraId",e),r.post(t.url+"rest/arquivo/upload/"+e,s,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})}}angular.module("app.geogoncalo").service("api.service",["$http","Constants",r])}();
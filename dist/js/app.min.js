!function(){"use strict";function e(e){function t(e,t,o,i){i.getObject("credencial")||(t.location.href=o.server.url+"login.html#?logout=true")}e.when("/",{templateUrl:"dist/views/home.html",resolve:{credenciais:t}}).when("/cadastrar",{templateUrl:"dist/views/cadastro.html",controller:"cadastro.ctrl"}).when("/gerenciar",{templateUrl:"dist/views/gerenciamento.html",controller:"gerenciamento.ctrl"}).when("/editar/:obraId",{templateUrl:"dist/views/editar_obra.html",controller:"editar_obra.ctrl"}).otherwise("/"),t.$inject=["api.autenticacao.service","$window","Constants","$cookies"]}function t(e,t,o,i,n){function a(e){var t="",o=(new Date).getHours();t=o>=5&&o<13?"Bom dia ":o>=13&&o<18?"Boa tarde ":"Boa noite ",$.notify({message:t+"<b>"+e.nome+"</b>! Tenha um ótimo trabalho."},{type:"success",animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},icon:"glyphicon glyphicon-warning-sign",delay:5e3})}n.getObject("credencial")&&a(n.getObject("credencial"))}angular.module("app.gerenciador",["ngRoute","app.geogoncalo","file-model","ui.utils.masks","ngCookies"]).config(e).run(t),e.$inject=["$routeProvider"],t.$inject=["$rootScope","$location","api.service","$window","$cookies"]}();
!function(){"use strict";angular.module("app.geogoncalo",[])}();
!function(){"use strict";angular.module("app.login",["app.geogoncalo","ngCookies"])}();
!function(){"use strict";angular.module("app.mapa",["app.geogoncalo"])}();
!function(){angular.module("app.geogoncalo").constant("Constants",{server:{url:"http://sistemas.saogoncalo.rn.gov.br:8080/geosga/"},map:{margens:[{lat:-5.836665426830297,lng:-35.30731201171875},{lat:-5.82505284759278,lng:-35.28190612792969},{lat:-5.804901037565987,lng:-35.25890350341797},{lat:-5.7820159050934095,lng:-35.24860382080078},{lat:-5.7714269482752405,lng:-35.26542663574219},{lat:-5.763570497636473,lng:-35.286712646484375},{lat:-5.732826820844514,lng:-35.290489196777344},{lat:-5.71642951546535,lng:-35.271949768066406},{lat:-5.696273850826121,lng:-35.263023376464844},{lat:-5.69388245380099,lng:-35.27366638183594},{lat:-5.704131228074497,lng:-35.27812957763672},{lat:-5.716771130790152,lng:-35.28327941894531},{lat:-5.72155372392195,lng:-35.29529571533203},{lat:-5.7229201717573135,lng:-35.30628204345703},{lat:-5.725653057629539,lng:-35.327911376953125},{lat:-5.7277027134569725,lng:-35.34919738769531},{lat:-5.730777183407863,lng:-35.372886657714844},{lat:-5.730435576452969,lng:-35.40275573730469},{lat:-5.727361104663058,lng:-35.420265197753906},{lat:-5.728215126264805,lng:-35.431766510009766},{lat:-5.72872753861297,lng:-35.44258117675781},{lat:-5.7277027134569725,lng:-35.45270919799805},{lat:-5.734791049814115,lng:-35.45356750488281},{lat:-5.7435018967610825,lng:-35.45391082763672},{lat:-5.754518365355367,lng:-35.45391082763672},{lat:-5.7616917650638975,lng:-35.453224182128906},{lat:-5.771170761384021,lng:-35.45459747314453},{lat:-5.7832968138611225,lng:-35.45682907104492},{lat:-5.793800156299324,lng:-35.45940399169922},{lat:-5.808487429417798,lng:-35.46086311340332},{lat:-5.820014962775452,lng:-35.4612922668457},{lat:-5.831713032727614,lng:-35.461978912353516},{lat:-5.837348512238894,lng:-35.46180725097656},{lat:-5.839995460332288,lng:-35.45116424560547},{lat:-5.843069319841188,lng:-35.43837547302246},{lat:-5.845630856540897,lng:-35.425758361816406},{lat:-5.8478508455303,lng:-35.409278869628906},{lat:-5.849387755823986,lng:-35.396575927734375},{lat:-5.844008551325454,lng:-35.396318435668945},{lat:-5.84178854709622,lng:-35.38825035095215},{lat:-5.8397393046117125,lng:-35.3774356842041},{lat:-5.838800065967573,lng:-35.36799430847168},{lat:-5.837775440196464,lng:-35.35700798034668},{lat:-5.837177740964791,lng:-35.346364974975586},{lat:-5.83640926958747,lng:-35.33675193786621},{lat:-5.8363238838138285,lng:-35.325422286987305},{lat:-5.83760466905246,lng:-35.322933197021484},{lat:-5.840507771422012,lng:-35.31829833984375},{lat:-5.840507771422012,lng:-35.315208435058594},{lat:-5.840678541681122,lng:-35.31280517578125},{lat:-5.838373138790638,lng:-35.31083106994629},{lat:-5.83692158395608,lng:-35.309200286865234}]}})}();

!function(){"use strict";function n(n,o){n.$on("LOAD",function(){n.loading=!0}),n.$on("UNLOAD",function(){o(function(){n.loading=!1},500)})}angular.module("app.gerenciador").controller("app.controller",n),n.$inject=["$scope","$timeout"]}();
!function(){"use strict";function a(a,o,t,e,r,n,i,s){var c,d,l,m;a.marcador={},a.marcador.obra={},a.cadastrarMarcador=function(t){var e=a.myFile;a.$emit("LOAD"),o.cadastrarMarcador(t).then(function(t){a.marcador={},e&&o.uploadImagem(e,t.data.obra.id).then(function(o){a.myfile={},d.setMap(null),a.$emit("UNLOAD"),i(function(){$.notify({message:"Obra cadastrada com sucesso!"},{type:"success"}),$("#modal-cadastrar").modal("hide")},600)},function(o){$.notify({message:"Obra cadastrada com sucesso porém ocorreu um erro ao enviar a(s) imagens."},{type:"warning"}),a.$emit("UNLOAD")})},function(o){$.notify({message:"Ocorreu um erro ao cadastrar a obra, tente novamente. Se o erro persistir, contact o administrador do sistema."},{type:"warning"}),a.$emit("UNLOAD")})},a.listarTipos=function(){o.listarTipos().then(function(o){a.tipos=o.data},null)},a.setCategorias=function(o){a.categorias=angular.copy(o)},a.listarCategoriasPorTipo=function(t){o.listarCategoriasPorTipo(t).then(function(o){a.categorias=o.data},null)},a.listarStatus=function(){o.listarStatus().then(function(o){a.status=o.data},null)}(),a.modalCadastro=function(){$("#modal-cadastrar").modal("show")},a.initMap=function(){function o(o){d.setMap(c),a.marcador={},a.marcador.obra={},a.marcador.latitude=o.latLng.lat(),a.marcador.longitude=o.latLng.lng();var e=new google.maps.LatLng(a.marcador.latitude,a.marcador.longitude);c.panTo(e),d.setPosition(e),l.geocode({location:e},function(o,e){if(e===google.maps.GeocoderStatus.OK){o[0]&&(a.marcador.obra.rua=o[0].formatted_address);var r="<div.content><h4>"+o[0].formatted_address+'</h4><button class="btn btn-primary" ng-click="modalCadastro()">Cadastrar obra</button></div>',n=t(r)(a);m?m.setContent(n[0]):m=new google.maps.InfoWindow({content:n[0]}),m.open(c,d)}})}c=new google.maps.Map(document.getElementById("mapa"),{center:{lat:-5.7968718,lng:-35.4148505},zoom:12}),l=new google.maps.Geocoder,d=new google.maps.Marker({map:c});var e=new google.maps.Polygon({paths:n.map.margens,strokeColor:"#FF0000",strokeOpacity:.6,strokeWeight:1,fillColor:"#FF0000",fillOpacity:.15});e.setMap(c),google.maps.event.addListener(e,"click",function(a){o(a)}),google.maps.event.addListener(c,"click",function(a){o(a)})}(),a.listarTipos()}angular.module("app.gerenciador").controller("cadastro.ctrl",a),a.$inject=["$scope","api.service","$compile","api.autenticacao.service","$window","Constants","$timeout","$location"]}();
!function(){"use strict";function t(t,a,i,o){t.init=function(){a.listarTipos().then(function(a){t.tipos=a.data}),a.selecionarMarcador(i.obraId).then(function(a){t.marcador=a.data},null),a.listarCategorias().then(function(a){t.categorias=a.data})}(),t.listarTipos=function(){a.listarTipos().then(function(a){t.tipos=a.data},null)},t.listarCategoriasPorTipo=function(i){a.listarCategoriasPorTipo(i).then(function(a){t.categorias=a.data},null)},t.listarStatus=function(){a.listarStatus().then(function(a){t.statusList=a.data},null)}(),t.atualizarObra=function(i){t.$emit("LOAD"),a.atualizarObra(i).then(function(a){t.$emit("UNLOAD"),$.notify({message:"Obra atualizada com sucesso!"},{type:"success"}),o.path("/gerenciar")},function(a){t.$emit("UNLOAD"),$.notify({message:"Ocorreu um erro ao atualizar a obra, tente novamente. Se o erro persistir, contacte o administrador do sistema."},{type:"success"})})},t.listarTipos()}angular.module("app.gerenciador").controller("editar_obra.ctrl",t),t.$inject=["$scope","api.service","$routeParams","$location"]}();
!function(){"use strict";function t(t,a,e){t.$emit("UNLOAD"),t.listarMarcadores=function(){t.$emit("LOAD"),a.listarMarcadores().then(function(a){t.marcadores=a.data,t.$emit("UNLOAD")},function(a){t.$emit("UNLOAD"),$.notify({message:"Ocorreu um erro ao listar as obras, tente novamente. Se o erro persistir, contact o administrador do sistema."},{type:"warning"})})},t.deletarMarcador=function(e){t.$emit("LOAD"),a.deletarMarcador(e).then(function(a){$.notify({message:"A obra foi deletada com sucesso!"},{type:"success"}),t.listarMarcadores()},function(a){$.notify({message:"Ocorreu um erro ao deletar a obra, tente novamente. Se o erro persistir, contacte o administrador do sistema."},{type:"warning"}),t.$emit("UNLOAD")})},t.listarStatus=function(){a.listarStatus().then(function(a){t.statusList=a.data},null)}(),t.listarTipos=function(){a.listarTipos().then(function(a){t.tipos=a.data},null)}(),t.listarCategoriasPorTipo=function(e){a.listarCategoriasPorTipo(e).then(function(a){t.categorias=a.data},null)},t.atualizarStatusObra=function(e,o){t.$emit("LOAD"),a.atualizarStatusObra(e,o).then(function(a){$.notify({message:"O status da obra foi atualizado com sucesso!"},{type:"success"}),t.$emit("UNLOAD")},function(a){$.notify({message:"Ocorreu um erro ao atualizar o status da obra, tente novamente. Se o erro persistir, contacte o administrador do sistema."},{type:"warning"}),t.$emit("UNLOAD")})},t.listarStatus=function(){a.listarStatus().then(function(a){t.status=a.data})}(),t.listarMarcadores()}angular.module("app.gerenciador").controller("gerenciamento.ctrl",["$scope","api.service","$route",t])}();
!function(){"use strict";function n(n){n.itens=[{link:"#/",nome:"Inicio",icone:"fa fa-home"},{link:"#/gerenciar",nome:"Gerenciar obras",icone:"fa fa-list"},{link:"#/cadastrar",nome:"Cadastrar Obras",icone:"fa fa-plus"}]}angular.module("app.gerenciador").controller("menu.ctrl",["$scope",n])}();
!function(){"use strict";function o(o,n,e,t,c,i){var a=e.search();console.log(a),"true"==a.logout&&c.logout().then(function(o){$.notify({message:"Logout efetuado com sucesso!"},{type:"success"}),i.put("credencial",null)}),o.login=function(o){$.notify({message:"Efetuando login."},{type:"info"}),c.login(o).then(function(o){i.putObject("credencial",o.data.funcionario),n.location=t.server.url},function(o){$.notify({message:"Login ou senha incorretos. Tente novamente."},{type:"danger"})})}}angular.module("app.login").controller("login.ctrl",o),o.$inject=["$scope","$window","$location","Constants","api.autenticacao.service","$cookies"]}();
!function(){"use strict";function a(a,r,o,t){var e;a.markersObjects=[],a.filtros=[],a.listarMarcadores=function(){r.listarMarcadores().then(function(r){a.marcadores=r.data,a.gerarMarcadores(a.marcadores)},null)},a.listarRelacionados=function(o,t){r.listarObrasRelacionadas(o,t).then(function(r){a.relacionados=r.data})},a.listarCategorias=function(){r.listarCategorias().then(function(r){a.obras=r.data.filter(function(a){if(1==a.tipo.id)return a}),a.equipamentos=r.data.filter(function(a){if(2==a.tipo.id)return a}),a.servicos=r.data.filter(function(a){if(3==a.tipo.id)return a})},null)}(),a.exibirObra=function(o){r.selecionarObra(o).then(function(r){a.marcador={},a.marcador.obra=r.data,a.listarRelacionados(o,a.marcador.obra.categoria.id)})},a.initMap=function(){e=new google.maps.Map(document.getElementById("mapa"),{center:{lat:-5.7968718,lng:-35.4148505},zoom:12});var r=new google.maps.Polygon({paths:o.map.margens,strokeColor:"#FF0000",strokeOpacity:.6,strokeWeight:1,fillColor:"#FF0000",fillOpacity:.15});r.setMap(e),a.listarMarcadores()}(),a.gerarMarcadores=function(r){a.markersObjects=[],r=r||a.marcadores;for(var o=0;o<r.length;o++){var t=new google.maps.Marker({position:{lat:parseFloat(r[o].latitude),lng:parseFloat(r[o].longitude)},map:e,title:r[o].obra.categoria.denominacao,animation:google.maps.Animation.DROP,icon:"dist/img/50x60/ico_"+r[o].obra.categoria.id+".png",categoria:r[o].obra.categoria.denominacao,categoria_id:r[o].obra.categoria.id});!function(o,t){google.maps.event.addListener(o,"mousedown",function(){a.marcador=r[t],a.listarRelacionados(r[t].obra.id,r[t].obra.categoria.id),$("#modal-obra").modal("show"),e.panTo({lat:parseFloat(r[t].latitude),lng:parseFloat(r[t].longitude)}),a.$apply()})}(t,o),t.setMap(e),a.markersObjects.push(t)}},a.removerMarcadores=function(){for(var r=0;r<a.markersObjects.length;r++)a.markersObjects[r].setMap(null)},a.filtrarMarcadores=function(r,o){function t(a,r){return r.indexOf(a)>-1}if(r=r||a.markersObjects,o=o||a.filtros,o.length>0)for(var e=0;e<r.length;e++)t(r[e].categoria_id,o)||r[e].setMap(null);else a.removerMarcadores(),a.gerarMarcadores()},a.adicionarCategoriaAoFiltro=function(r){function o(a,r){return r.indexOf(a)>-1}o(r.id,a.filtros)?a.filtros.indexOf(r.id)!=-1&&a.filtros.splice(a.filtros.indexOf(r.id),1):a.filtros.push(r.id)}}angular.module("app.mapa").controller("mapa.ctrl",a),a.$inject=["$scope","api.service","Constants","$timeout"]}();
!function(){"use strict";function e(e,c,t,o,n){o.getObject("credencial")&&(e.credencial=o.getObject("credencial"))}angular.module("app.gerenciador").controller("menu.top.ctrl",e),e.$inject=["$scope","$route","$timeout","$cookies","$compile"]}();
!function(){"use strict";function t(t,e){this.login=function(r){return t.post(e.server.url+"rest/autenticar/login",r)},this.logout=function(){return t.get(e.server.url+"rest/autenticar/logout")},this.autenticar=function(){return t.get(e.server.url+"rest/autenticar")}}angular.module("app.geogoncalo").service("api.autenticacao.service",["$http","Constants",t])}();
!function(){"use strict";function r(r,t){this.listarMarcadores=function(e){return r.get(t.server.url+"rest/marcadores")},this.listarMarcadoresPorCategoria=function(e){return r.get(t.server.url+"rest/marcadores/categoria/"+e)},this.selecionarMarcador=function(e){return r.get(t.server.url+"rest/marcador/"+e)},this.cadastrarMarcador=function(e){return r.post(t.server.url+"rest/marcadores",e)},this.atuarlizarMarcador=function(e,a){return r.put(t.server.url+"rest/marcador/"+e,a)},this.deletarMarcador=function(e){return r["delete"](t.server.url+"rest/marcador/"+e)},this.listarTipos=function(){return r.get(t.server.url+"rest/tipos")},this.listarCategorias=function(){return r.get(t.server.url+"rest/categorias")},this.listarCategoriasPorTipo=function(e){return r.get(t.server.url+"rest/categoria/tipo/"+e)},this.selecionarObra=function(e){return r.get(t.server.url+"rest/obra/"+e)},this.listarObras=function(){return r.get(t.server.url+"rest/obras")},this.atualizarObra=function(e){return r.put(t.server.url+"rest/obra/"+e.id,e)},this.atualizarStatusObra=function(e,a){return r.put(t.server.url+"rest/obra/"+e+"/status/"+a)},this.listarObrasRelacionadas=function(e,a){return r.get(t.server.url+"rest/obra/"+e+"/categoria/"+a+"/relacionados")},this.listarStatus=function(){return r.get(t.server.url+"rest/status")},this.uploadImagem=function(e,a){var s=new FormData;return s.append("file",e),s.append("obraId",a),r.post(t.server.url+"rest/arquivo/upload/"+a,s,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})}}angular.module("app.geogoncalo").service("api.service",["$http","Constants",r])}();
//# sourceMappingURL=app.min.js.map
